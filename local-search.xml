<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>KG-MTL</title>
    <link href="/2024/04/02/KG-MTL/"/>
    <url>/2024/04/02/KG-MTL/</url>
    
    <content type="html"><![CDATA[<p>知识图谱和多任务学习预测DTI和CPI，代码：<a href="https://github.com/xzenglab/KG-MTL">KG-MTL</a> （源代码的基础上下载一下项目中提到的 DRKG 数据集，加几个文件夹，微调一下细节可用跑起来），原文：<a href="https://ieeexplore.ieee.org/document/9815157">KG-MTL: Knowledge Graph Enhanced Multi-Task Learning for Molecular Interaction</a>，框架如下：<br><img src="kg-mtl.png" alt="模型框架"></p><ul><li>dti和cpi的区别是什么?<br>运行参数是<br>python <a href="http://main.py">main.py</a><br>–loss_mode weighted<br>–variant KG-MTL-C<br>–gpu 1<br>–cpi_dataset human<br>–dti_dataset drugcentral</li></ul><h1>if __ main__</h1><ul><li>参数中variant是指共享模块中保留哪些部分,可以看原文解释</li><li></li></ul><h1>main</h1><ul><li>drugs 和 drugid 都是 drugid的列表,为什么要设置两个?</li><li></li></ul><h1>load_data</h1><ul><li>load_diata返回的是包含数据的类,在init中调用读取函数</li><li>读取的是drugcentral_dti_examples.tsv,里面的数据似乎只有label是1的正例</li><li>drug2smiles 是药物id到定长smiles的映射,sample_nodes是药物和靶点的id集合</li><li>smiles_graph[drug_id]中,c_size是分子的原子数量,edge_index是双向边的集合,features是atom_features得到</li><li>dti数据集中得到的sample_nodes最后也添加了cpi数据集的drugid</li></ul><h1>model</h1><ul><li>MultiTaskLoss只是套了一层计算损失函数的forward,实际调用的模型是MKDTI</li><li>rgcn_layers中的<a href="https://blog.csdn.net/weixin_52812620/article/details/137139828?csdn_share_tail=%7B%22type%22%3A%22blog%22%2C%22rType%22%3A%22article%22%2C%22rId%22%3A%22137139828%22%2C%22source%22%3A%22weixin_52812620%22%7D">RelGraphConv</a></li><li><a href="https://zhuanlan.zhihu.com/p/37449901">Cross_stitch</a>自动决定共享层,其中共享参数都是单个数值?而不是矩阵?</li><li>self.cpi_hidden_dim 设置的是[78,drug_hidden_dim,drug_hidden_dim]</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>code</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>how</title>
    <link href="/2024/04/02/how/"/>
    <url>/2024/04/02/how/</url>
    
    <content type="html"><![CDATA[<h1>概述</h1><ul><li>依靠页面生成和部署项目<a href="https://github.com/hexojs/hexo">hexo</a>和hexo主题<a href="https://github.com/fluid-dev/hexo-theme-fluid">Fluid</a>进行写作</li><li>hexo配置可用看：<a href="https://zhuanlan.zhihu.com/p/60578464">使用 Hexo+GitHub 搭建个人免费博客教程（小白向）</a>，<a href="https://fuguigui.github.io/hexo2/">一次完整的Hexo写作流程</a></li><li>fluid配置可以看：<a href="https://hexo.fluid-dev.com/docs/guide/">配置指南</a></li></ul><h1>快捷键和别名</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">hexo new xxx<br></code></pre></td></tr></table></figure><blockquote><p>创建新的名为xxx.md的文章，位于source/_posts目录下，由于配置了_config.yml，会同时创建一个同名的文件夹来放置引用资源，比如图片等，引用格式是 <code>![图片标题](图片名称)</code>，注意不需要加图片路径.即<strong>不需要</strong><code>.\xxx\图片名称</code>，像下面例子这样<br><img src="broken.jpg" alt="帅气"></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cbp<br></code></pre></td></tr></table></figure><blockquote><p>bashrc中创建的别名，代表的命令是<code>cd source/_posts</code>，即文章创建的地方，之后vim修改文章，编辑摘要excerpt</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">cdf2<br></code></pre></td></tr></table></figure><blockquote><p>bashrc中创建的别名，代表的命令是<code>cd .. &amp;&amp; cd ..</code>，即退回2层父目录。当位于<code>source/_posts0</code>下时，调用<code>cdf2</code>即可返回初始文件夹进行git操作</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">hexocgs<br></code></pre></td></tr></table></figure><blockquote><p>bashrc中创建的别名，代表的命令是<code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>，即清理原有文件，生成页面，启动服务器预览页面，此时可用预览部署后的结果</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">hexo d<br></code></pre></td></tr></table></figure><blockquote><p>将生成的页面部署到 github，缓存一段时间后即可看到部署结果</p></blockquote><h1>云存档</h1><p>由于github存储的是hexo生成的页面结果，而不是原markdown文档，因此难以在原先分支上直接存储写了一部分的文章，因此在<a href="https://github.com/YangooSen/YangooSen.github.io/tree/writing">仓库</a>中新开了分支 writing，在本地文件夹创建分支writing，跟踪 source 文件夹下的原markdown文章和引用资源，用下面的命令进行拉取和推送</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># ... 修改source文件夹下的内容</span><br>git add <span class="hljs-built_in">source</span><br>git commit<br>git push writing writing:writing <span class="hljs-comment">#将写了一半的文章云存储在writing分支</span><br><br><br><span class="hljs-built_in">rm</span> -rf <span class="hljs-built_in">source</span> <span class="hljs-comment"># 删除本地文章腾出空间</span><br>git add <span class="hljs-built_in">source</span><br>git commit<br>git pull -f writing writing:writing <span class="hljs-comment">#force拉取云存档内容,之后进入source继续写作</span><br></code></pre></td></tr></table></figure><blockquote><p>删除本地文章腾出空间之后，实际只是预支存储空间，之后要修改还是需要拉回本地编辑。后续有更好的方法思路会在这里记录，目前想到的空间紧缺解决方法是新开一个文件夹并关联另一个仓库</p></blockquote><h1>数学公式</h1><ul><li>在文章中展现数学公式依靠<a href="https://github.com/hexojs/hexo-math">hexo-math</a>，在文章中配置<code>katex:true</code>，已经在post.md模板中写好，下面是测试公式</li></ul><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>φ</mi><mi>i</mi><mrow><mo stretchy="false">(</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msubsup><mo>=</mo><mi>σ</mi><mo stretchy="false">(</mo><munder><mo>∑</mo><mrow><mi>r</mi><mo>∈</mo><mi mathvariant="script">R</mi></mrow></munder><munder><mo>∑</mo><mrow><mi>j</mi><mo>∈</mo><msup><mi mathvariant="script">N</mi><mi>r</mi></msup><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow></munder><msub><mi>e</mi><mrow><mi>j</mi><mo separator="true">,</mo><mi>i</mi></mrow></msub><msubsup><mi>W</mi><mi>r</mi><mrow><mo stretchy="false">(</mo><mi>l</mi><mo stretchy="false">)</mo></mrow></msubsup><msubsup><mi>φ</mi><mi>j</mi><mrow><mo stretchy="false">(</mo><mi>l</mi><mo stretchy="false">)</mo></mrow></msubsup><mo>+</mo><msubsup><mi>W</mi><mn>0</mn><mrow><mo stretchy="false">(</mo><mi>l</mi><mo stretchy="false">)</mo></mrow></msubsup><msubsup><mi>φ</mi><mi>i</mi><mrow><mo stretchy="false">(</mo><mi>l</mi><mo stretchy="false">)</mo></mrow></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varphi_i^{(l+1)} = \sigma(\sum_{r\in\mathcal{R}}\sum_{j\in\mathcal{N}^r(i)}e_{j,i}W_r^{(l)}\varphi_j^{(l)}+W_0^{(l)}\varphi_i^{(l)})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3217em;vertical-align:-0.2769em;"></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.566em;vertical-align:-1.516em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8557em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">R</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3217em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.809em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">∈</span><span class="mord mtight"><span class="mord mathcal mtight" style="margin-right:0.14736em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.5935em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">i</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.516em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-2.453em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.413em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.3217em;vertical-align:-0.2769em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4337em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2663em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">φ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0448em;"><span style="top:-2.4231em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.2198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2769em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>]]></content>
    
    
    
    <tags>
      
      <tag>note</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
